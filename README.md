

# 本地音频剪辑器

一个基于 Web Audio API 的本地音频剪辑工具，支持音频文件的截取、淡入淡出、格式转换等功能。
![输入图片说明](.idea/Snipaste_2026-02-10_17-24-41.jpg)

## 功能特性

### 核心功能

- **音频上传**：支持拖拽或点击上传本地音频文件
- **波形可视化**：实时显示音频波形，方便精准定位截取位置
- **时间选择**：通过输入时间或拖动波形区域来选择截取范围
- **音频截取**：快速裁剪音频片段，保留指定时间段的内容
- **批量处理**：支持同时处理多个音频文件，一键导出所有结果
- **结果下载**：支持单独下载或批量下载截取后的音频文件

### 高级功能

- **淡入淡出**：为截取的音频片段添加淡入淡出效果，使过渡更自然
- **音量调节**：可单独调整输出音频的音量大小
- **音频标准化**：自动调整音频响度，使其达到最佳播放效果
- **多种输出格式**：支持导出为 WAV、MP3 等常用音频格式
- **键盘快捷键**：支持键盘操作，提高编辑效率

## 使用方法

### 1. 上传音频

- 点击上传区域选择音频文件
- 或直接将音频文件拖拽到上传区域
- 支持 MP3、WAV、OGG、FLAC 等常见音频格式

### 2. 选择截取范围

- **方式一**：在波形图上直接拖动选择区域
- **方式二**：在时间输入框中手动输入开始时间和结束时间
- 实时显示当前选择的时长

### 3. 设置输出选项

- 选择输出格式（WAV / MP3）
- 调整音量大小
- 添加淡入淡出效果（可选）

### 4. 截取与下载

- 点击「开始截取」按钮处理音频
- 处理完成后可单个或批量下载结果
- 支持删除不需要的结果

### 键盘快捷键

| 快捷键 | 功能 |
|--------|------|
| `Space` | 播放/暂停当前选区 |
| `Delete` | 删除选中的文件 |
| `Ctrl + Enter` | 快速截取 |

## 技术说明

### 技术栈

- **Web Audio API**：核心音频处理引擎
- **WaveSurfer.js**：音频波形可视化
- **原生 JavaScript (ES6+)**：无框架依赖
- **CSS3**：现代化样式设计
- **Web Worker**：后台音频处理，避免界面卡顿

### 音频处理原理

1. **音频解码**：使用 AudioContext.decodeAudioData 解码上传的音频文件
2. **缓冲处理**：在内存中创建 AudioBuffer 进行数据操作
3. **裁剪算法**：根据开始和结束时间提取目标音频片段
4. **效果处理**：
   - 淡入淡出：应用线性增益包络
   - 音量调整：应用增益系数
   - 标准化：分析峰值并进行归一化处理
5. **编码导出**：将处理后的 Buffer 转换为指定格式的 Blob

### 文件结构

```
audio-cutter-local/
├── index.html          # 主页面
├── app.js              # 主应用逻辑
├── audio-processor.js   # 音频处理核心模块
├── style.css           # 样式文件
├── package.json        # 项目配置
└── vercel.json         # Vercel 部署配置
```

## 浏览器兼容性

| 浏览器 | 最低版本 | 备注 |
|--------|----------|------|
| Chrome | 66+ | 最佳体验 |
| Firefox | 76+ | 完全支持 |
| Safari | 14.1+ | 需要启用 Web Audio API |
| Edge | 79+ | 完全支持 |

**注意**：由于使用 Web Audio API，建议使用最新版本的浏览器以获得最佳性能和功能支持。

## 注意事项

1. **文件大小**：由于音频处理在浏览器内存中进行，建议处理 100MB 以下的音频文件
2. **格式支持**：浏览器原生支持解码 MP3、WAV、OGG、AAC 等格式
3. **隐私安全**：所有音频处理均在本地完成，不会上传到服务器
4. **性能影响**：处理大型音频文件时可能会占用较多内存和 CPU
5. **采样率**：导出时保持原始采样率，确保音频质量

## 开发说明

### 环境要求

- Node.js 14+ 
- npm 或 yarn

### 本地开发

```bash
# 克隆项目
git clone https://gitee.com/zoe0520/audio-cutter-local.git
cd audio-cutter-local

# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

### 构建部署

```bash
# 构建生产版本
npm run build
```

### 主要模块说明

**app.js** - 主应用程序类
- 负责 UI 交互和用户事件处理
- 管理文件列表和编辑器状态
- 协调音频处理器与界面的通信

**audio-processor.js** - 音频处理器类
- 实现音频解码和编码
- 提供裁剪、淡入淡出、音量调节等核心功能
- 处理 WAV 和 MP3 格式转换

## 许可证

本项目基于 MIT 许可证开源。

---

如有问题或建议，欢迎提交 Issue 或 Pull Request。
